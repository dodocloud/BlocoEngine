<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<title>Hello World</title>
</head>
<script src="../lib/pixi.js" charset="utf-8"></script>

<body>
	<script type="text/javascript">
		let type = "WebGL"
		if (!PIXI.utils.isWebGLSupported()) {
			type = "canvas"
		}

		//Create a Pixi Application
		let app = new PIXI.Application({
			width: 800,
			height: 800,
			antialias: true,
			transparent: false,
			resolution: 1
		});

		//Aliases
		let Application = PIXI.Application,
			Container = PIXI.Container,
			loader = PIXI.loader,
			resources = PIXI.loader.resources,
			TextureCache = PIXI.utils.TextureCache,
			Sprite = PIXI.Sprite,
			Rectangle = PIXI.Rectangle

		//Add the canvas that Pixi automatically created for you to the HTML document
		document.body.appendChild(app.view);

		//load an image and run the `setup` function when it's done
		loader
			.add("img/speeddriver.png")
			.load(setup);

		//This `setup` function will run when the image has loaded
		function setup() {
			let texture = TextureCache["img/speeddriver.png"];
			let rectangle = new Rectangle(2, 163, 169, 134);
			texture.frame = rectangle;

			let scene = new Container();
			let road = new PIXI.Sprite(texture);
			road.x = 200;
			road.y = 200;
			road.scale = new PIXI.Point(2, 2);

			scene.addChild(road);

			texture = texture.clone();
			rectangle = new Rectangle(8, 13, 39, 106);
			texture.frame = rectangle;

			let car = new PIXI.Sprite(texture);
			car.anchor.x = 0.5;
			car.anchor.y = 0.5;

			let bbox = new PIXI.Graphics();
			app.stage.addChild(bbox);

			road.addChild(car);

			app.stage.addChild(scene);

			app.ticker.add(delta => {
				road.rotation += 0.01;
				let bounds = car.getBounds();
				//bbox.x = bounds.x;
				//bbox.y = bounds.y;
				//bbox.width = bounds.width;
				//bbox.height = bounds.height;
				bbox.clear();
				bbox.beginFill(0x66CCFF);
				bbox.drawRect(bounds.x, bounds.y, bounds.width, bounds.height);
				bbox.endFill();
			});
		}
	</script>
</body>

</html>