<!DOCTYPE html>
<html lang="en">

<head>
	<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
	<meta content="utf-8" http-equiv="encoding">

</head>

<body>
	<canvas id="gameCanvas" width="600" height="400"></canvas>
	<!-- debugging window -->
	<div id="debugSect" style="height:900px;overflow:scroll;float:left; font-family:'Courier New', Courier, monospace"></div>
	<script src="../js/imageloader.js"></script>
	<script src="../js/compengine.js"></script>
	<script src="../js/compenginecom.js"></script>
	<script src="../js/utils.js"></script>
	<script src="../js/sortedarray.js"></script>
	<script src="../js/main.js"></script>

	<script type="text/javascript">
		// Start a new game
		function newGame() {
			scene.clearScene();

			// unit size is 100 px!
			UNIT_SIZE = 100;

			// debugging
			scene.addGlobalComponent(new DebugComponent(false, document.getElementById("debugSect")));

			let anim1 = null;
			let anim2 = null;

			let obj = new GameObjectBuilder("rect1")
			.withMesh(new RectMesh("rgb(255,0,0)", 1, 1))
			.withPosition(2,2)
			.withCenteredOrigin()
			.withComponent(new BasicRenderer())
			.withComponent(new ExecutorComponent()
				.beginRepeat(0)
				.execute(() => anim1 = new RotationAnimation(0,360))
				.execute(() => anim2 = new TranslateAnimation(1,1,2,1,1))
				.addComponent(anim1) // TODO pass by function also
				.addComponent(anim2)
				.waitForFinish(anim1)
				.waitForFinish(anim2)
				.removeComponent("RotationAnimation")
				.removeComponent("TranslateAnimation")
				.endRepeat()
			)
			.asGlobal()
			.build(scene);
		}

	</script>
</body>
</html>